{% extends 'home.html' %}
{% load static %}
{% block content %}

<h1>Edit image for "{{ wishlist.name }}"</h1>
<div class="create-wishlist-page edit-item-page">
        <form method="post" enctype="multipart/form-data" class="edit-item-form">
        {% csrf_token %}

        <div class="form-group">
            <label for="id_image">Upload new image:</label>
            <input type="file" name="image" id="id_image">

            <input type="hidden" name="clear_image" id="clear-image-input" value="false">
            {% if wishlist.image %}
            <div class="current-image">
                <span>Current:</span>
                <img src="{{ wishlist.image.url }}" alt="Current image" class="image-preview">
                <button type="button" class="clear-image-btn cancel-btn">Clear</button>
            </div>
            {% endif %}
        </div>

        <div class="form-buttons">
            <button type="submit" class="btn-save">üíæ Save</button>
            <a href="{% url 'wishlist:wishlist_list' %}" class="btn-back">‚úñ Back</a>
        </div>
    </form>
</div>

<script>
const clearBtn = document.querySelector('.clear-image-btn');
const fileInput = document.getElementById('id_image');
const clearInput = document.getElementById('clear-image-input');

if (clearBtn) {
    clearBtn.addEventListener('click', () => {
        fileInput.value = ''; // –æ—á–∏—â–∞—î –≤–∏–±—ñ—Ä —Ñ–∞–π–ª—É
        clearInput.value = 'true'; // –ø–æ–≤—ñ–¥–æ–º–ª—è—î–º–æ —Å–µ—Ä–≤–µ—Ä—É, —â–æ —Ç—Ä–µ–±–∞ –≤–∏–¥–∞–ª–∏—Ç–∏
        clearBtn.parentElement.style.display = 'none'; // —Ö–æ–≤–∞—î–º–æ –ø—Ä–µ–≤'—é
    });
}
</script>

{% endblock %}
